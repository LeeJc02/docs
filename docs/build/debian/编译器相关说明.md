# 编译器相关说明

RevyOS 会预制相关优化编译器 基本支持`rv64gc`

## 常规扩展

| 支持的优化 | gcc-14 | clang-19 | clang-20 |
| :--: | :--: | :--: | :--: |
| Zfh  | ✅ | ✅ | ✅ |
| V    | ✅ | ✅ | ✅ |

## THead 厂商扩展

*xthead 当前版本 v2.2*

| 支持的优化 | gcc-14 | clang-19 | clang-20 |
| :--: | :--: | :--: | :--: |
| XTheadCmo              | ✅ | ✅ | ✅ |
| XTheadSync             | ✅ | ✅ | ✅ |
| XTheadBa               | ✅ | ✅ | ✅ |
| XTheadBb               | ✅ | ✅ | ✅ |
| XTheadBs               | ✅ | ✅ | ✅ |
| XTheadCondMov          | ✅ | ✅ | ✅ |
| XTheadMemIdx           | ✅ | ✅ | ✅ |
| XTheadMemPair          | ✅ | ✅ | ✅ |
| XTheadFMemIdx          | ✅ | ✅ | ✅ |
| XTheadMac              | ✅ | ✅ | ✅ |
| XTheadFmv              | ✅ | ❌ | ❌ |
| XTheadInt              | ✅ | ❌ | ❌ |
| XtheadVector           | ✅ | ❌ | ❌ |
| XTHeadVdot<sup>1</sup> | ✅ | ✅ | ✅ |

注:

1. XTHeadVdot c910v1/c920v1 不支持

## 参考文档

- [xuantie 扩展参考文档](https://github.com/XUANTIE-RV/thead-extension-spec)
- [gcc 合并 xuantie 扩展提交](https://gcc.gnu.org/git/?p=gcc.git;a=commitdiff;h=8351535f20b52cf332791f60d2bf22a025833516)
- [clang-19 xuantie 扩展文档](https://github.com/llvm/llvm-project/blob/release/19.x/llvm/docs/RISCVUsage.rst#vendor-extensions)
